# Chat2BI 前端使用指南

## 项目概述

Chat2BI 前端是一个基于 React + TypeScript + Antd 的自然语言查询界面，用户可以通过输入中文问题来查询数据库并获得结果。

## 功能特性

### 1. 自然语言查询
- 输入中文问题，如"总销售额是多少？"
- 自动转换为SQL查询并执行
- 实时显示查询结果

### 2. 示例查询
- 提供预设的查询示例
- 点击示例可快速填入查询框
- 涵盖常见的业务查询场景

### 3. 结果展示
- 表格形式展示查询结果
- 显示生成的SQL语句
- 支持SQL语句复制
- 显示查询执行时间和结果数量

### 4. 用户体验
- 响应式设计，适配移动端
- 加载状态提示
- 错误信息友好提示
- 中文界面本地化

## 技术栈

- **React 19.1.0** - 用户界面框架
- **TypeScript** - 类型安全
- **Ant Design** - UI组件库
- **Axios** - HTTP客户端
- **React Hooks** - 状态管理

## 目录结构

```
frontend/
├── public/                 # 静态资源
├── src/
│   ├── api.ts             # API服务封装
│   ├── QueryInterface.tsx # 查询界面组件
│   ├── App.tsx            # 主应用组件
│   ├── App.css            # 应用样式
│   ├── index.tsx          # 应用入口
│   └── index.css          # 全局样式
├── package.json           # 项目配置
└── tsconfig.json          # TypeScript配置
```

## 启动方式

### 方法1：使用启动脚本（推荐）

```bash
# 启动前后端服务
./start_services.sh

# 停止所有服务
./stop_services.sh
```

### 方法2：手动启动

```bash
# 启动后端服务
python main.py

# 启动前端服务（新终端）
cd frontend
npm start
```

### 方法3：仅启动前端

```bash
cd frontend
npm start
```

## 使用方法

1. **访问界面**
   - 打开浏览器访问 `http://localhost:3000`
   - 界面会自动加载示例查询

2. **输入查询**
   - 在"查询输入"区域输入中文问题
   - 点击"查询"按钮执行

3. **查看结果**
   - 查询成功后会显示结果表格
   - 可以查看生成的SQL语句
   - 可以复制SQL语句到其他工具使用

4. **使用示例**
   - 点击"示例查询"中的任一示例
   - 问题会自动填入查询框
   - 直接点击查询即可

## 示例查询

1. **总销售额是多少？**
   - 查询所有已完成订单的总销售额

2. **查询所有用户的信息**
   - 获取用户基本信息列表

3. **哪个商品最受欢迎？**
   - 按销量排序找出最受欢迎的商品

4. **各个用户等级的人数分布**
   - 统计不同用户等级的用户数量

5. **月度销售趋势**
   - 按月份统计销售金额

6. **库存不足的商品**
   - 查询库存量低于50的商品

## 界面说明

### 查询输入区域
- **文本框**: 输入自然语言查询
- **查询按钮**: 执行查询
- **清空按钮**: 清空输入和结果

### 示例查询区域
- **示例卡片**: 点击可快速填入查询
- **帮助提示**: 鼠标悬停查看使用说明

### 查询结果区域
- **查询信息**: 显示查询问题和状态
- **SQL语句**: 显示生成的SQL，支持复制
- **结果表格**: 以表格形式展示查询结果
- **分页控制**: 支持翻页和调整页面大小

## 常见问题

### 1. 无法连接到后端服务
- 确保后端服务正在运行 (`python main.py`)
- 检查端口8000是否被占用
- 确认GROQ_API_KEY环境变量已设置

### 2. 查询失败
- 检查问题是否为中文
- 尝试使用示例查询
- 查看控制台错误信息

### 3. 界面显示异常
- 清除浏览器缓存
- 检查网络连接
- 确认React应用正常启动

## 开发说明

### 本地开发

```bash
# 安装依赖
npm install

# 启动开发服务器
npm start

# 构建生产版本
npm run build
```

### 自定义配置

1. **修改API地址**
   - 编辑 `src/api.ts` 中的 `API_BASE_URL`

2. **修改界面样式**
   - 编辑 `src/App.css` 或 `src/index.css`

3. **添加新功能**
   - 在 `src/QueryInterface.tsx` 中添加新组件

## 性能优化

- 使用React.memo优化组件渲染
- 表格分页减少DOM节点
- 防抖处理用户输入
- 缓存API请求结果

## 部署说明

### 生产环境部署

```bash
# 构建生产版本
npm run build

# 部署到静态服务器
# 将build目录内容部署到nginx或其他静态服务器
```

### Docker部署

```bash
# 构建Docker镜像
docker build -t chat2bi-frontend .

# 运行容器
docker run -p 3000:3000 chat2bi-frontend
```

## 技术支持

如有问题或建议，请：
1. 查看控制台错误信息
2. 检查网络连接状态
3. 确认后端服务正常运行
4. 查看日志文件（logs/frontend.log）

---

**注意**: 确保后端服务正在运行，前端才能正常工作。 